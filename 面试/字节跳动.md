## 一面
1. kafka如何保证消息有序？
    - kafka消息有序是建立在分区的基础上，同一个分区上的数据都是有序的
- 四个消费者 三个分区会怎么样？
    - 会有一个消费者空闲
- 四个生产者呢？
    - 不影响，四个生产者都可以写入
    
2. jvm fullGC怎么处理？
    - 导出堆内存分析
- 怎么实现呢?
- 配置、每台服务器都要配吗？
- 拿到堆内存怎么分析，怎么关联到对应代码？

3. 服务器CPU占用很高，怎么去看哪个线程占用的高？
    1. top 命令找出应用 pid-app
    2. top -Hp <pid-app> 命令找出线程 pid-thread
    3. printf '%x\n' <pid-thread> 命令将线程 pid 转换成 16 进制 pid-thread-hex
    4. jstack <pid-app> | grep 'pid-thread-hex' 命令查看线程信息
    - 通过线程信息关联具体的线程，一般需要指定线程名称
    
4. tcp连接出现了大量的close_wait状态可能有哪些原因？

5. redis为什么快？如何看哪些value占用的内存较多？淘汰策略

6. protobuf为什么占用更小，为什么解析快？新旧版本字段表更如何兼容

7. 为什么需要一个数据收集服务而不是直接发到kafka？

8. redis pipeline？有什么优势？
    - 管道技术，将一批命令一次性提交，处理完之后一次性返回结果，减少了客户端发送和服务端响应的次数（网络io和系统级读写调用），但是会独占连接
- redis支持事务吗？支持到什么程度？不会回滚？
    - 支持。事务只保证这些命令要么全部执行要么全部不执行（先写到AOF文件，成功后再船型执行命令），某一条命令失败不会回滚，也不影响其他命令执行，返回结果里对应结果是ERROR，需要客户端处理

9. sql写出第n高的薪资

10. 给定一个红黑树，获取最深的叶子节点的和
